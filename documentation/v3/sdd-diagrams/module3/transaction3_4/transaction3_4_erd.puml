@startuml
' Entity-Relationship Diagram for Disconnection/Reconnection Handling (Transaction 3.4)

entity "matches" as Match {
  * matchID : string <<PK>>
  * gameName : string
  * state : object
  * metadata : object
  * status : enum (waiting, in_progress, completed, abandoned)
}

entity "players" as Player {
  * id : string <<PK>>
  * matchID : string <<FK>>
  * name : string
  * role : enum (attacker, defender)
  * isConnected : boolean
  * left : boolean
}

entity "connections" as Connection {
  * connectionID : string <<PK>>
  * playerID : string <<FK>>
  * matchID : string <<FK>>
  * connectedAt : datetime
  * disconnectedAt : datetime
  * status : enum (connected, disconnected, reconnecting)
}

Match ||--o{ Player : has
Player ||--o{ Connection : has
@enduml 